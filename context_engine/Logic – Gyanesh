# Context Engine

Owner: Gyanesh

context_engine.py

# SECURION - Context Logic Engine
# Member-2 : Gyanesh
# Role : Risk Engine

import datetime

def securion_risk_engine(face_detected, zone, behavior_type):
    """
    SECURION Final Risk Engine
    R = Face + Time + Zone + Behavior
    """

    now = datetime.datetime.now()
    hour = now.hour

    # Night window: 10 PM to 8 AM
    is_night = hour >= 22 or hour < 8

    risk_score = 0
    details = []

    # 1ï¸âƒ£ Face Factor
    if face_detected:
        risk_score += 40
        details.append("Face Detected")

    # 2ï¸âƒ£ Time Factor
    if is_night:
        risk_score += 20
        details.append("Night Access")

    # 3ï¸âƒ£ Zone Factor
    if zone == "RESTRICTED":
        risk_score += 20
        details.append("Restricted Zone")

    # 4ï¸âƒ£ Behavior Factor (Independent of Face)
    if behavior_type == "LOITERING":
        risk_score += 20
        details.append("Suspicious Loitering")
    elif behavior_type == "RUNNING":
        risk_score += 30
        details.append("High Speed Movement")

    # Cap score at 100
    risk_score = min(risk_score, 100)

    # 5ï¸âƒ£ Final Status (Roadmap Aligned)
    if risk_score >= 70:
        status = "âš ï¸ ALERT"
    elif risk_score >= 40:
        status = "ðŸ”” WARNING"
    else:
        status = "âœ… NORMAL"

    return {
        "Time": now.strftime("%H:%M:%S"),
        "Risk Score": risk_score,
        "Status": status,
        "Factors": details
    }


# -------- DEMO RUN --------
result = securion_risk_engine(
    face_detected=True,
    zone="RESTRICTED",
    behavior_type="LOITERING"
)

print("=" * 40)
print("SECURION FINAL SYSTEM LOG")
print("=" * 40)
for key, value in result.items():
    print(f"{key}: {value}")
print("=" * 40)
